{% extends 'base.html.twig' %}

{% block title %}CRUD Utilisateurs -
	{{ parent() }}
{% endblock %}

{% block body %}
	<div class="d-flex flex-column text-center" id="homeBO">
		<h1 class="my-3">Gestion des utilisateurs</h1>
		{# USER CARD LOOPED #}
		<div class="d-flex flex-column container" id="container-usersCards">
			{% for user in users %}
				<div class="col-12">{{ user.id }}
					-
					{{ user.pseudo }}</div>
				<div
					class="d-flex flex-row row">
					{# ENTETES PROPERTIES #}
					<div class="col-4 col-md-5 col-lg-6 d-flex flex-column align-items-start fw-bold border border-start-0 border-secondary p-0">
						<h5 class="border-bottom border-secondary h6 w-100 m-0">PROPERTIES HEADER</h5>
						<div class="border-bottom border-secondary w-100 text-start">Avatar</div>
						<div class="border-bottom border-secondary w-100 text-start">Email</div>
						<div class="border-bottom border-secondary w-100 text-start">Role</div>
						<div class="border-bottom border-secondary w-100 text-start">Status user</div>
						<div class="{{ loop.last ? ' ' : 'border-bottom border-secondary' }} w-100 text-start">Créé le</div>
					</div>
					{# USERS DATA #}
					<div class="col-8 col-md-7 col-lg-6 border border-start-0 border-end-0 border-secondary p-0">
						<h5 class="border-bottom border-secondary h6 m-0">DATA HEADERS</h5>
						<div class="border-bottom border-secondary w-100 text-start">
							{# <img src="" alt="">Avatar user #}TEST
						</div>
						<div class="border-bottom border-secondary w-100 text-start">
							{{ user.email }}
						</div>
						<div class="border-bottom border-secondary w-100 text-start">
							{{ user.roles|json_encode }}
						</div>
						{% set userStatus = user.isVerified == 0 ? 'non-vérifié' : 'vérifié' %}
						<div class="border-bottom border-secondary w-100 text-start">
							{{ userStatus }}
						</div>
						<div class="{{ loop.last ? ' ' : 'border-bottom border-secondary' }} w-100 text-start">
							{{ user.createdAt|date("d-m-Y") }}
						</div>
					</div>
				</div>
			{% endfor %}
			<div class="d-flex flex-row justify-content-end">
				<a class="btn btn-primary mx-2 my-2" href="#">Edit</a>
				<a class="btn btn-danger mx-2 my-2" href="#">Supprimer</a>
			</div>
		</div>
		{# Liste des utilisateurs existants #}
		{# <div class="d-flex flex-row border border-dark w-75 justify-content-around m-auto" id="users-grid">
					{% for user in users %}
						<div id="id-header">
							<span class="users-headers">Id</span>
							<div class="users-cells {{loop.last == loop.length ? 'border-bt-none' : ''}}">
								{{ user.id }}
							</div>
						</div>
						<div>
							<span class="users-headers">Pseudo</span>
		
							<div class="users-cells {{loop.last == loop.length ? 'border-bt-none' : ''}}">
								{{ user.pseudo }}
							</div>
						</div>
						<div>
							<span class="users-headers">Email</span>
		
							<div class="users-cells {{loop.last == loop.length ? 'border-bt-none' : ''}}">
								{{ user.email }}
							</div>
						</div>
						<div>
							<span class="users-headers">Rôles</span>
		
							<div class="users-cells {{loop.last == loop.length ? 'border-bt-none' : ''}}">
								{{ user.roles|json_encode }}
							</div>
						</div>
						<div id="is-verified-column">
							<span class="users-headers">Utilisateurs vérifiés</span>
		
							<div class="users-cells {{loop.last == loop.length ? 'border-bt-none' : ''}}">
								{{ user.isVerified == 0 ? 'non-vérifié' : 'vérifié' }}
							</div>
						</div>
						<div id="actions-column">
							<span class="users-headers">Actions</span>
		
							<div class="d-flex flex-row justify-content-center">
								<a class="btn-edit btn btn-md btn-primary mx-1" href="{{ path('backoffice_user_edit', {'id': user.id}) }}"><i class="far fa-edit"></i></a>
								<a class="btn-delete btn btn-sm btn-danger mx-1" href="{{ path('backoffice_user_delete', {'id': user.id}) }}"><i class="fas fa-trash-alt"></i></a>
							</div>
						</div>
					{% endfor %}
				</div> #}
	</div>
{% endblock %}
